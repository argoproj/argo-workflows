# This example demonstrates creating a workflow that waits on two CloudEvents.
# curl -d '{"type": "test"}' https://localhost:2746/api/v1/events/argo -k -H "Authorization: Bearer $ARGO_TOKEN"
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: event-consumer-
spec:
  entrypoint: main
  arguments:
    parameters:
      - name: type
        value: test

  templates:
    - name: main
      steps:
        - - name: a
            template: consume-event

    - name: consume-event
      inputs:
        parameters:
          - name: type
      suspend:
        event:
          expression: event.type == inputs.parameters[0].value
      outputs:
        parameters:
          - name: eventType
            value: event.type