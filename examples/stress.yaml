# Create some CPU stress so you can test usage capture.
# Needs to run for at least 60s for data to be available.
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: stress
spec:
  entrypoint: stress
  templates:
    - name: stress
      container:
        resources:
          requests:
            cpu: 100m
            memory: 1000m
        name: main
        image: jfusterm/stress
        args:
          # timeout after at least 1m
          - -t
          - '90'
          # chew threw some cores
          - -c
          - '2'
          # gobble up a few bites of memory
          - -m
          - '1'
          - --vm-bytes
          - '2G'