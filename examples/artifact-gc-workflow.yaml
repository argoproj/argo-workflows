apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: artifact-gc-
spec:
  entrypoint: main
  artifactGC:
    strategy: OnWorkflowCompletion
  templates:
    - name: main
      container:
        image: argoproj/argosay:v2
        command:
          - sh
          - -c
        args:
          - |
          - echo "hello world" > /tmp/message
      outputs:
        artifacts:
          - name: will-be-deleted-on-completion
            path: /tmp/message
            s3:
              key: message