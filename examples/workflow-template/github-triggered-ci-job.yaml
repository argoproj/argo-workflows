# This job can be submit a workflow from github.com using an event.
# You need to set-up an access token, webhook account, and secret.
apiVersion: argoproj.io/v1alpha1
kind: SubmitWorkflow
metadata:
  name: ci-job
spec:
  workflowTemplateRef:
    - name: oeuharoe
  expression: metadata.claimSet.sub == "system:serviceaccount:argo:github.com" && metadata["x-github-event"] == ["push"]
  parameters:
    - name: revision
      valueFrom:
        expression: event.repository.clone_url
