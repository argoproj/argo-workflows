



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.5.0">
    
    
      
        <title>Cost Optimisation - Argo Workflows - The workflow engine for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700|&display=fallback">
        <style>body,input{font-family:"Work Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105170809-7", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#cost-optimisation" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-header-nav__button md-logo">
          
            <img src="../assets/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Argo Workflows - The workflow engine for Kubernetes
            </span>
            <span class="md-header-nav__topic">
              
                Cost Optimisation
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/argoproj/argo/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-nav__button md-logo">
      
        <img src="../assets/logo.png" width="48" height="48">
      
    </a>
    Argo Workflows - The workflow engine for Kubernetes
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/argoproj/argo/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../core-concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Beginner
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Beginner
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../variables/" title="Workflow Variables" class="md-nav__link">
      Workflow Variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Intermediate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Intermediate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../service-accounts/" title="None" class="md-nav__link">
      None
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-rbac/" title="Workfow RBAC" class="md-nav__link">
      Workfow RBAC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-field-selector/" title="Node Field Selectors" class="md-nav__link">
      Node Field Selectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-templates/" title="Workflow Templates" class="md-nav__link">
      Workflow Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cluster-workflow-templates/" title="Cluster Workflow Templates" class="md-nav__link">
      Cluster Workflow Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cron-workflows/" title="Cron Workflows" class="md-nav__link">
      Cron Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cron-backfill/" title="Cron Backfill" class="md-nav__link">
      Cron Backfill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../work-avoidance/" title="Work Avoidance" class="md-nav__link">
      Work Avoidance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../enhanced-depends-logic/" title="Enhanced Depends Logic" class="md-nav__link">
      Enhanced Depends Logic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artifact-repository-ref/" title="Artifact Repository Ref" class="md-nav__link">
      Artifact Repository Ref
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resource-duration/" title="Resource Duration" class="md-nav__link">
      Resource Duration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-creator/" title="Workflow Creator" class="md-nav__link">
      Workflow Creator
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-requirements/" title="Workflow Restrictions" class="md-nav__link">
      Workflow Restrictions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-notifications/" title="Workflow Notifications" class="md-nav__link">
      Workflow Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-events/" title="Workflow Events" class="md-nav__link">
      Workflow Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubectl/" title="Kubectl" class="md-nav__link">
      Kubectl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../access-token/" title="Access Token" class="md-nav__link">
      Access Token
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rest-api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rest-examples/" title="API Examples" class="md-nav__link">
      API Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../submit-workflow-via-automation/" title="Submitting A Workflow Via Automation" class="md-nav__link">
      Submitting A Workflow Via Automation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-submitting-workflow/" title="One Workflow Submitting Another" class="md-nav__link">
      One Workflow Submitting Another
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resuming-workflow-via-automation/" title="Resume The Template" class="md-nav__link">
      Resume The Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../async-pattern/" title="Asynchronous Job Pattern" class="md-nav__link">
      Asynchronous Job Pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fields/" title="Field Reference" class="md-nav__link">
      Field Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      CLI Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        CLI Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo/" title="argo" class="md-nav__link">
      argo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive/" title="argo archive" class="md-nav__link">
      argo archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_delete/" title="argo archive delete" class="md-nav__link">
      argo archive delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_get/" title="argo archive get" class="md-nav__link">
      argo archive get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_list/" title="argo archive list" class="md-nav__link">
      argo archive list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_auth/" title="argo auth" class="md-nav__link">
      argo auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_auth_token/" title="argo auth token" class="md-nav__link">
      argo auth token
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template/" title="argo cluster-template" class="md-nav__link">
      argo cluster-template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_create/" title="argo cluster-template create" class="md-nav__link">
      argo cluster-template create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_delete/" title="argo cluster-template delete" class="md-nav__link">
      argo cluster-template delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_get/" title="argo cluster-template get" class="md-nav__link">
      argo cluster-template get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_lint/" title="argo cluster-template lint" class="md-nav__link">
      argo cluster-template lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_list/" title="argo cluster-template list" class="md-nav__link">
      argo cluster-template list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_completion/" title="argo completion" class="md-nav__link">
      argo completion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron/" title="argo cron" class="md-nav__link">
      argo cron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_create/" title="argo cron create" class="md-nav__link">
      argo cron create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_delete/" title="argo cron delete" class="md-nav__link">
      argo cron delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_get/" title="argo cron get" class="md-nav__link">
      argo cron get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_lint/" title="argo cron lint" class="md-nav__link">
      argo cron lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_list/" title="argo cron list" class="md-nav__link">
      argo cron list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_resume/" title="argo cron resume" class="md-nav__link">
      argo cron resume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_suspend/" title="argo cron suspend" class="md-nav__link">
      argo cron suspend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_delete/" title="argo delete" class="md-nav__link">
      argo delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_get/" title="argo get" class="md-nav__link">
      argo get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_lint/" title="argo lint" class="md-nav__link">
      argo lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_list/" title="argo list" class="md-nav__link">
      argo list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_logs/" title="argo logs" class="md-nav__link">
      argo logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_resubmit/" title="argo resubmit" class="md-nav__link">
      argo resubmit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_resume/" title="argo resume" class="md-nav__link">
      argo resume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_retry/" title="argo retry" class="md-nav__link">
      argo retry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_server/" title="argo server" class="md-nav__link">
      argo server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_stop/" title="argo stop" class="md-nav__link">
      argo stop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_submit/" title="argo submit" class="md-nav__link">
      argo submit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_suspend/" title="argo suspend" class="md-nav__link">
      argo suspend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template/" title="argo template" class="md-nav__link">
      argo template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_create/" title="argo template create" class="md-nav__link">
      argo template create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_delete/" title="argo template delete" class="md-nav__link">
      argo template delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_get/" title="argo template get" class="md-nav__link">
      argo template get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_lint/" title="argo template lint" class="md-nav__link">
      argo template lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_list/" title="argo template list" class="md-nav__link">
      argo template list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_terminate/" title="argo terminate" class="md-nav__link">
      argo terminate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_version/" title="argo version" class="md-nav__link">
      argo version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_wait/" title="argo wait" class="md-nav__link">
      argo wait
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_watch/" title="argo watch" class="md-nav__link">
      argo watch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../swagger/" title="API Reference" class="md-nav__link">
      API Reference
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Operator Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Operator Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../managed-namespace/" title="Managed Namespace" class="md-nav__link">
      Managed Namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../service-accounts/" title="Service Accounts" class="md-nav__link">
      Service Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-artifact-repository/" title="Configuring Your Artifact Repository" class="md-nav__link">
      Configuring Your Artifact Repository
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-controller-configmap/" title="Workflow Controller Configmap" class="md-nav__link">
      Workflow Controller Configmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-executors/" title="Workflow Executors" class="md-nav__link">
      Workflow Executors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../default-workflow-specs/" title="Default Workflow Spec" class="md-nav__link">
      Default Workflow Spec
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../offloading-large-workflows/" title="Offloading Large Workflows" class="md-nav__link">
      Offloading Large Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-archive/" title="Workflow Archive" class="md-nav__link">
      Workflow Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/" title="Prometheus Metrics" class="md-nav__link">
      Prometheus Metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../links/" title="Links" class="md-nav__link">
      Links
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Argo Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Argo Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server/" title="Argo Server" class="md-nav__link">
      Argo Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server-auth-mode/" title="Argo Server Auth Mode" class="md-nav__link">
      Argo Server Auth Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tls/" title="Transport Layer Security" class="md-nav__link">
      Transport Layer Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server-sso/" title="Argo Server SSO" class="md-nav__link">
      Argo Server SSO
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scaling/" title="Scaling" class="md-nav__link">
      Scaling
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Cost Optimisation
      </label>
    
    <a href="./" title="Cost Optimisation" class="md-nav__link md-nav__link--active">
      Cost Optimisation
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-cost-optimisations" class="md-nav__link">
    User Cost Optimisations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-the-workflows-pod-resource-requests" class="md-nav__link">
    Set The Workflows Pod Resource Requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-a-node-selector-to-use-cheaper-instances" class="md-nav__link">
    Use A Node Selector To Use Cheaper Instances
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consider-trying-volume-claim-templates-or-volumes-instead-of-artifacts" class="md-nav__link">
    Consider trying Volume Claim Templates or Volumes instead of Artifacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limit-the-total-number-of-workflows-and-pods" class="md-nav__link">
    Limit The Total Number Of Workflows And Pods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-cost-optimisations" class="md-nav__link">
    Operator Cost Optimisations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-resources-requests-and-limits" class="md-nav__link">
    Set Resources Requests and Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-executor-resource-requests" class="md-nav__link">
    Configure Executor Resource Requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows/" title="Windows Container Support" class="md-nav__link">
      Windows Container Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-locally/" title="Running Locally" class="md-nav__link">
      Running Locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public-api/" title="Public API" class="md-nav__link">
      Public API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../static-code-analysis/" title="Static Code Analysis" class="md-nav__link">
      Static Code Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releasing/" title="Release Instructions" class="md-nav__link">
      Release Instructions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo/releases" title="Releases ⧉" class="md-nav__link">
      Releases ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo/milestones" title="Roadmap ⧉" class="md-nav__link">
      Roadmap ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://blog.argoproj.io/" title="Blog ⧉" class="md-nav__link">
      Blog ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://argoproj.github.io/community/join-slack" title="Slack ⧉" class="md-nav__link">
      Slack ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://twitter.com/argoproj" title="Twitter ⧉" class="md-nav__link">
      Twitter ⧉
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-cost-optimisations" class="md-nav__link">
    User Cost Optimisations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-the-workflows-pod-resource-requests" class="md-nav__link">
    Set The Workflows Pod Resource Requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-a-node-selector-to-use-cheaper-instances" class="md-nav__link">
    Use A Node Selector To Use Cheaper Instances
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consider-trying-volume-claim-templates-or-volumes-instead-of-artifacts" class="md-nav__link">
    Consider trying Volume Claim Templates or Volumes instead of Artifacts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limit-the-total-number-of-workflows-and-pods" class="md-nav__link">
    Limit The Total Number Of Workflows And Pods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operator-cost-optimisations" class="md-nav__link">
    Operator Cost Optimisations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-resources-requests-and-limits" class="md-nav__link">
    Set Resources Requests and Limits
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configure-executor-resource-requests" class="md-nav__link">
    Configure Executor Resource Requests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo/edit/master/docs/cost-optimisation.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="cost-optimisation">Cost Optimisation<a class="headerlink" href="#cost-optimisation" title="Permanent link">&para;</a></h1>
<h2 id="user-cost-optimisations">User Cost Optimisations<a class="headerlink" href="#user-cost-optimisations" title="Permanent link">&para;</a></h2>
<p>Suggestions for users running workflows.</p>
<h3 id="set-the-workflows-pod-resource-requests">Set The Workflows Pod Resource Requests<a class="headerlink" href="#set-the-workflows-pod-resource-requests" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Suitable if you are running a workflow with many homogenous pods.</p>
</blockquote>
<p><a href="../resource-duration/">Resource duration</a> shows the amount of CPU and memory requested by a pod and is indicative of the cost. You can use this to find costly steps within your workflow.</p>
<p>Smaller requests can be set in the pod spec patch's <a href="../fields/#resourcerequirements">resource requirements</a>. </p>
<h2 id="use-a-node-selector-to-use-cheaper-instances">Use A Node Selector To Use Cheaper Instances<a class="headerlink" href="#use-a-node-selector-to-use-cheaper-instances" title="Permanent link">&para;</a></h2>
<p>You can use a <a href="../fields/#nodeselector">node selector</a> for cheaper instances, e.g. spot instances:</p>
<div class="codehilite"><pre><span></span><span class="nt">nodeSelector</span><span class="p">:</span>
  <span class="s">&quot;node-role.kubernetes.io/argo-spot-worker&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;true&quot;</span>
</pre></div>


<h3 id="consider-trying-volume-claim-templates-or-volumes-instead-of-artifacts">Consider trying Volume Claim Templates or Volumes instead of Artifacts<a class="headerlink" href="#consider-trying-volume-claim-templates-or-volumes-instead-of-artifacts" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Suitable if you have a workflow that passes a lot of artifacts within itself.</p>
</blockquote>
<p>Copying artifacts to and from storage outside of a cluster can be expensive. The correct choice is dependent on your artifact storage provider is vs. what volume they are using. For example, we believe it may be more expensive to allocate and delete new EBS volumes every workflow using the PVC feature, than it is to upload and download some small files to S3.</p>
<p>On the other hand if they are using a NFS volume shared between all their workflows with large artifacts, that might be cheaper than the data transfer and storage costs of S3.</p>
<p>Consider:</p>
<ul>
<li>Data transfer costs (upload/download vs. copying)</li>
<li>Data storage costs (s3 vs. volume)</li>
<li>Requirement for parallel access to data (NFS vs. EBS vs. artifact)</li>
</ul>
<h3 id="limit-the-total-number-of-workflows-and-pods">Limit The Total Number Of Workflows And Pods<a class="headerlink" href="#limit-the-total-number-of-workflows-and-pods" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Suitable for all.</p>
</blockquote>
<p>A workflow (and for that matter, any Kubernetes resource) will incur a cost as long as they exist in your cluster. </p>
<p>The workflow controller memory and CPU needs increase linearly with the number of pods and workflows you are currently running. </p>
<p>Limit the total number of workflows using:</p>
<ul>
<li>Active Deadline Seconds - terminate running workflows that do not complete in a set time. This will make sure workflows do not run forever.</li>
<li><a href="../fields/#ttlstrategy">Workflow TTL Strategy</a> - delete completed workflows after a time</li>
<li><a href="../fields/#podgc">Pod GC</a> - delete completed pods after a time</li>
</ul>
<p>Example</p>
<div class="codehilite"><pre><span></span><span class="nt">spec</span><span class="p">:</span>
  <span class="c1"># must complete in 8h (28,800 seconds)</span>
  <span class="nt">activeDeadlineSeconds</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">28800</span>
  <span class="c1"># keep workflows for 1d (86,400 seconds)</span>
  <span class="nt">ttlStrategy</span><span class="p">:</span>
    <span class="nt">secondsAfterCompletion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">86400</span>
  <span class="c1"># delete all pods as soon as they complete</span>
  <span class="nt">podGC</span><span class="p">:</span>
    <span class="nt">strategy</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">OnPodCompletion</span>
</pre></div>


<p>You can set these configurations globally using <a href="../default-workflow-specs/">Default Workflow Spec</a>.</p>
<p>If you need to keep records historically, use the <a href="../workflow-archive/">Workflow Archive</a>.</p>
<p>Changing these settings will not delete workflows that have already run. To list old workflows:</p>
<div class="codehilite"><pre><span></span><span class="n">argo</span> <span class="n">list</span> <span class="c1">--completed --since 7d</span>
</pre></div>


<blockquote>
<p>v2.9 and after</p>
</blockquote>
<p>To list/delete workflows completed over 7 days ago:</p>
<div class="codehilite"><pre><span></span><span class="n">argo</span> <span class="n">list</span> <span class="c1">--older 7d</span>
<span class="n">argo</span> <span class="k">delete</span> <span class="c1">--older 7d</span>
</pre></div>


<h2 id="operator-cost-optimisations">Operator Cost Optimisations<a class="headerlink" href="#operator-cost-optimisations" title="Permanent link">&para;</a></h2>
<p>Suggestions for operators who installed Argo Workflows.</p>
<h3 id="set-resources-requests-and-limits">Set Resources Requests and Limits<a class="headerlink" href="#set-resources-requests-and-limits" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Suitable if you have many instances, e.g. on dozens of clusters or namespaces.</p>
</blockquote>
<p>Set a resource requests and limits for the <code>workflow-controller</code> and <code>argo-server</code>, e.g. </p>
<div class="codehilite"><pre><span></span><span class="nt">requests</span><span class="p">:</span>
  <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100m</span>
  <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">64Mi</span>
<span class="nt">limits</span><span class="p">:</span>
  <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">500m</span>
  <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">128Mi</span>
</pre></div>


<p>This above limit is suitable for the Argo Server, as this is stateless. The Workflow Controller is stateful and will scale to the number of live workflows - so you are likely to need higher values.</p>
<h3 id="configure-executor-resource-requests">Configure Executor Resource Requests<a class="headerlink" href="#configure-executor-resource-requests" title="Permanent link">&para;</a></h3>
<blockquote>
<p>Suitable for all - unless you have large artifacts.</p>
</blockquote>
<p>Configure <a href="../workflow-controller-configmap.yaml">workflow-controller-configmap.yaml</a> to set the <code>executorResources</code></p>
<div class="codehilite"><pre><span></span><span class="nt">executorResources</span><span class="p">:</span>
  <span class="nt">requests</span><span class="p">:</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">100m</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">64Mi</span>
  <span class="nt">limits</span><span class="p">:</span>
    <span class="nt">cpu</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">500m</span>
    <span class="nt">memory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">512Mi</span>
</pre></div>


<p>The correct values depend on the size of artifacts your workflows download. For artifacts &gt; 10GB, memory usage maybe large - <a href="https://github.com/argoproj/argo/issues/1322">#1322</a>.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../scaling/" title="Scaling" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Scaling
              </span>
            </div>
          </a>
        
        
          <a href="../windows/" title="Windows Container Support" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Windows Container Support
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a8b5e56f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>