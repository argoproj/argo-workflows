#apiVersion: argoproj.io/v1alpha1
#kind: WorkflowTemplate
#metadata:
#  name: common
#spec:
#  templates:
#    - name: daemoned
#      daemon: true
#      container:
#        image: argoproj/argosay:v2
#        command: ["sleep"]
#        args: ["60"]
#    - name: daemon-dependent
#      container:
#        image: argoproj/argosay:v2
##---
apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: daemoned-pod-completed
spec:
  entrypoint: main
  templates:
    - name: daemoned
      daemon: true
      container:
        image: argoproj/argosay:v2
        command: ["sleep"]
        args: ["600"]
    - name: daemon-dependent
      container:
        image: argoproj/argosay:v2
    - name: main
      dag:
        tasks:
          - name: daemoned
            templateRef:
              name: common
              template: daemoned
          - name: daemon-dependent
            dependencies: [daemoned]
            templateRef:
              name: common
              template: daemon-dependent