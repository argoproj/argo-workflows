
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.4, mkdocs-material-8.1.9">
    
    
      
        <title>Prometheus Metrics - Argo Workflows - The workflow engine for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2b4465f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font:"Work Sans";--md-code-font:""}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-105170809-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
  <script async src="https://www.google-analytics.com/analytics.js"></script>


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prometheus-metrics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-header__button md-logo" aria-label="Argo Workflows - The workflow engine for Kubernetes" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Argo Workflows - The workflow engine for Kubernetes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prometheus Metrics
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/argoproj/argo-workflows/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-nav__button md-logo" aria-label="Argo Workflows - The workflow engine for Kubernetes" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Argo Workflows - The workflow engine for Kubernetes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/argoproj/argo-workflows/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../core-concepts/" class="md-nav__link">
        Core Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quick-start/" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../training/" class="md-nav__link">
        Training
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_1" type="checkbox" id="__nav_5_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_1">
          Beginner
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Beginner" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_1">
          <span class="md-nav__icon md-icon"></span>
          Beginner
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-concepts/" class="md-nav__link">
        Core Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../variables/" class="md-nav__link">
        Workflow Variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_2">
          Intermediate
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Intermediate" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Intermediate
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service-accounts/" class="md-nav__link">
        Service Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-rbac/" class="md-nav__link">
        Workflow RBAC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../node-field-selector/" class="md-nav__link">
        Node Field Selectors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../empty-dir/" class="md-nav__link">
        Empty Dir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-templates/" class="md-nav__link">
        Workflow Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-inputs/" class="md-nav__link">
        Workflow Inputs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cluster-workflow-templates/" class="md-nav__link">
        Cluster Workflow Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cron-workflows/" class="md-nav__link">
        Cron Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cron-backfill/" class="md-nav__link">
        Cron Backfill
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../http-template/" class="md-nav__link">
        HTTP Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../container-set-template/" class="md-nav__link">
        Container Set Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../template-defaults/" class="md-nav__link">
        Template Defaults
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../work-avoidance/" class="md-nav__link">
        Work Avoidance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../enhanced-depends-logic/" class="md-nav__link">
        Enhanced Depends Logic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../data-sourcing-and-transformation/" class="md-nav__link">
        Data Sourcing and Transformations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../artifact-repository-ref/" class="md-nav__link">
        Artifact Repository Ref
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../key-only-artifacts/" class="md-nav__link">
        Key-Only Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../conditional-artifacts-parameters/" class="md-nav__link">
        Conditional Artifacts and Parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resource-duration/" class="md-nav__link">
        Resource Duration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../estimated-duration/" class="md-nav__link">
        Estimated Duration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-pod-security-context/" class="md-nav__link">
        Workflow Pod Security Context
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../progress/" class="md-nav__link">
        Workflow Progress
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../lifecyclehook/" class="md-nav__link">
        LifecycleHook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-creator/" class="md-nav__link">
        Workflow Creator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../synchronization/" class="md-nav__link">
        Synchronization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-of-workflows/" class="md-nav__link">
        Workflow of Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../memoization/" class="md-nav__link">
        Step Level Memoization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tolerating-pod-deletion/" class="md-nav__link">
        Tolerating Pod Deletion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../widgets/" class="md-nav__link">
        Widgets
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../retries/" class="md-nav__link">
        Retries
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_3">
          Advanced
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Advanced" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Advanced
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-restrictions/" class="md-nav__link">
        Workflow Restrictions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-notifications/" class="md-nav__link">
        Workflow Notifications
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-events/" class="md-nav__link">
        Workflow Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../kubectl/" class="md-nav__link">
        Kubectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../access-token/" class="md-nav__link">
        Access Token
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../swagger/" class="md-nav__link">
        Argo Server API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rest-api/" class="md-nav__link">
        REST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rest-examples/" class="md-nav__link">
        API Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../client-libraries/" class="md-nav__link">
        Client Libraries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../webhooks/" class="md-nav__link">
        Webhooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../submit-workflow-via-automation/" class="md-nav__link">
        Submitting A Workflow Via Automation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-submitting-workflow/" class="md-nav__link">
        One Workflow Submitting Another
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resuming-workflow-via-automation/" class="md-nav__link">
        Resume A Workflow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../async-pattern/" class="md-nav__link">
        Asynchronous Job Pattern
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../running-at-massive-scale/" class="md-nav__link">
        Running At Massive Scale
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../debug-pause/" class="md-nav__link">
        Debug pause
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_4">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../executor_plugins/" class="md-nav__link">
        Executor Plugins
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../executor_swagger/" class="md-nav__link">
        The API for an executor plugin.
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plugin-directory/" class="md-nav__link">
        Plugin Directory
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ide-setup/" class="md-nav__link">
        IDE Set-Up
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-workflows/blob/master/examples/README.md" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fields/" class="md-nav__link">
        Field Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" type="checkbox" id="__nav_5_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_9">
          CLI Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CLI Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          CLI Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo/" class="md-nav__link">
        argo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive/" class="md-nav__link">
        argo archive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive_delete/" class="md-nav__link">
        argo archive delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive_get/" class="md-nav__link">
        argo archive get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive_list/" class="md-nav__link">
        argo archive list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive_list-label-keys/" class="md-nav__link">
        argo archive list-label-keys
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_archive_list-label-values/" class="md-nav__link">
        argo archive list-label-values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_auth/" class="md-nav__link">
        argo auth
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_auth_token/" class="md-nav__link">
        argo auth token
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template/" class="md-nav__link">
        argo cluster-template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template_create/" class="md-nav__link">
        argo cluster-template create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template_delete/" class="md-nav__link">
        argo cluster-template delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template_get/" class="md-nav__link">
        argo cluster-template get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template_lint/" class="md-nav__link">
        argo cluster-template lint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cluster-template_list/" class="md-nav__link">
        argo cluster-template list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_completion/" class="md-nav__link">
        argo completion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron/" class="md-nav__link">
        argo cron
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_create/" class="md-nav__link">
        argo cron create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_delete/" class="md-nav__link">
        argo cron delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_get/" class="md-nav__link">
        argo cron get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_lint/" class="md-nav__link">
        argo cron lint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_list/" class="md-nav__link">
        argo cron list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_resume/" class="md-nav__link">
        argo cron resume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_cron_suspend/" class="md-nav__link">
        argo cron suspend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_delete/" class="md-nav__link">
        argo delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_executor-plugin/" class="md-nav__link">
        argo executor-plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_executor-plugin_build/" class="md-nav__link">
        argo executor-plugin build
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_get/" class="md-nav__link">
        argo get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_lint/" class="md-nav__link">
        argo lint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_list/" class="md-nav__link">
        argo list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_logs/" class="md-nav__link">
        argo logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_node/" class="md-nav__link">
        argo node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_resubmit/" class="md-nav__link">
        argo resubmit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_resume/" class="md-nav__link">
        argo resume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_retry/" class="md-nav__link">
        argo retry
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_server/" class="md-nav__link">
        argo server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_stop/" class="md-nav__link">
        argo stop
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_submit/" class="md-nav__link">
        argo submit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_suspend/" class="md-nav__link">
        argo suspend
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template/" class="md-nav__link">
        argo template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template_create/" class="md-nav__link">
        argo template create
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template_delete/" class="md-nav__link">
        argo template delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template_get/" class="md-nav__link">
        argo template get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template_lint/" class="md-nav__link">
        argo template lint
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_template_list/" class="md-nav__link">
        argo template list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_terminate/" class="md-nav__link">
        argo terminate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_version/" class="md-nav__link">
        argo version
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_wait/" class="md-nav__link">
        argo wait
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cli/argo_watch/" class="md-nav__link">
        argo watch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Operator Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operator Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Operator Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading/" class="md-nav__link">
        Upgrading
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../releases/" class="md-nav__link">
        Releases
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_4" type="checkbox" id="__nav_6_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6_4">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../managed-namespace/" class="md-nav__link">
        Managed Namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-artifact-repository/" class="md-nav__link">
        Configuring Your Artifact Repository
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure-archive-logs/" class="md-nav__link">
        Configuring Archive Logs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-controller-configmap/" class="md-nav__link">
        Workflow Controller Configmap
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-executors/" class="md-nav__link">
        Workflow Executors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sidecar-injection/" class="md-nav__link">
        Sidecar Injection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../default-workflow-specs/" class="md-nav__link">
        Default Workflow Spec
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../offloading-large-workflows/" class="md-nav__link">
        Offloading Large Workflows
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../workflow-archive/" class="md-nav__link">
        Workflow Archive
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Prometheus Metrics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Prometheus Metrics
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-and-metrics-in-argo" class="md-nav__link">
    Metrics and metrics in Argo
  </a>
  
    <nav class="md-nav" aria-label="Metrics and metrics in Argo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-metrics" class="md-nav__link">
    Controller metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-metrics" class="md-nav__link">
    Custom metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-and-isnt-a-prometheus-metric" class="md-nav__link">
    What is and isn't a Prometheus metric
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-controller-metrics" class="md-nav__link">
    Default Controller Metrics
  </a>
  
    <nav class="md-nav" aria-label="Default Controller Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argo_pod_missing" class="md-nav__link">
    argo_pod_missing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_count" class="md-nav__link">
    argo_workflows_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_error_count" class="md-nav__link">
    argo_workflows_error_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_k8s_request_total" class="md-nav__link">
    argo_workflows_k8s_request_total
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_operation_duration_seconds" class="md-nav__link">
    argo_workflows_operation_duration_seconds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_pods_count" class="md-nav__link">
    argo_workflows_pods_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_adds_count" class="md-nav__link">
    argo_workflows_queue_adds_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_depth_count" class="md-nav__link">
    argo_workflows_queue_depth_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_latency" class="md-nav__link">
    argo_workflows_queue_latency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workers_busy" class="md-nav__link">
    argo_workflows_workers_busy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workflow_condition" class="md-nav__link">
    argo_workflows_workflow_condition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workflows_processed_count" class="md-nav__link">
    argo_workflows_workflows_processed_count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-types" class="md-nav__link">
    Metric types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-metrics-work-in-argo" class="md-nav__link">
    How metrics work in Argo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard-for-argo-controller-metrics" class="md-nav__link">
    Grafana Dashboard for Argo Controller Metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-metrics" class="md-nav__link">
    Defining metrics
  </a>
  
    <nav class="md-nav" aria-label="Defining metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metric-spec" class="md-nav__link">
    Metric Spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#realtime-metrics" class="md-nav__link">
    Realtime metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../links/" class="md-nav__link">
        Links
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_5" type="checkbox" id="__nav_6_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_5">
          Argo Server
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Argo Server" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_5">
          <span class="md-nav__icon md-icon"></span>
          Argo Server
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-server/" class="md-nav__link">
        Argo Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-server-auth-mode/" class="md-nav__link">
        Argo Server Auth Mode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tls/" class="md-nav__link">
        Transport Layer Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-server-sso/" class="md-nav__link">
        Argo Server SSO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../argo-server-sso-argocd/" class="md-nav__link">
        Use ArgoCD Dex for authentication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../high-availability/" class="md-nav__link">
        High-Availability (HA)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../disaster-recovery/" class="md-nav__link">
        Disaster Recovery (DR)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scaling/" class="md-nav__link">
        Scaling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cost-optimisation/" class="md-nav__link">
        Cost Optimisation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../windows/" class="md-nav__link">
        Windows Container Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../environment-variables/" class="md-nav__link">
        Environment Variables
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Developer Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developer Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mentoring/" class="md-nav__link">
        Mentoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../running-locally/" class="md-nav__link">
        Running Locally
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../versioning/" class="md-nav__link">
        Versioning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../public-api/" class="md-nav__link">
        Public API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../static-code-analysis/" class="md-nav__link">
        Static Code Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../stress-testing/" class="md-nav__link">
        Stress Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../releasing/" class="md-nav__link">
        Release Instructions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/argoproj/argo-workflows/releases" class="md-nav__link">
        Releases 
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../roadmap/" class="md-nav__link">
        Roadmap
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://blog.argoproj.io/" class="md-nav__link">
        Blog 
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://argoproj.github.io/community/join-slack" class="md-nav__link">
        Slack 
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://twitter.com/argoproj" class="md-nav__link">
        Twitter 
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-and-metrics-in-argo" class="md-nav__link">
    Metrics and metrics in Argo
  </a>
  
    <nav class="md-nav" aria-label="Metrics and metrics in Argo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#controller-metrics" class="md-nav__link">
    Controller metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-metrics" class="md-nav__link">
    Custom metrics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-and-isnt-a-prometheus-metric" class="md-nav__link">
    What is and isn't a Prometheus metric
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-controller-metrics" class="md-nav__link">
    Default Controller Metrics
  </a>
  
    <nav class="md-nav" aria-label="Default Controller Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#argo_pod_missing" class="md-nav__link">
    argo_pod_missing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_count" class="md-nav__link">
    argo_workflows_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_error_count" class="md-nav__link">
    argo_workflows_error_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_k8s_request_total" class="md-nav__link">
    argo_workflows_k8s_request_total
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_operation_duration_seconds" class="md-nav__link">
    argo_workflows_operation_duration_seconds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_pods_count" class="md-nav__link">
    argo_workflows_pods_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_adds_count" class="md-nav__link">
    argo_workflows_queue_adds_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_depth_count" class="md-nav__link">
    argo_workflows_queue_depth_count
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_queue_latency" class="md-nav__link">
    argo_workflows_queue_latency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workers_busy" class="md-nav__link">
    argo_workflows_workers_busy
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workflow_condition" class="md-nav__link">
    argo_workflows_workflow_condition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#argo_workflows_workflows_processed_count" class="md-nav__link">
    argo_workflows_workflows_processed_count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metric-types" class="md-nav__link">
    Metric types
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-metrics-work-in-argo" class="md-nav__link">
    How metrics work in Argo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboard-for-argo-controller-metrics" class="md-nav__link">
    Grafana Dashboard for Argo Controller Metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-metrics" class="md-nav__link">
    Defining metrics
  </a>
  
    <nav class="md-nav" aria-label="Defining metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metric-spec" class="md-nav__link">
    Metric Spec
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#realtime-metrics" class="md-nav__link">
    Realtime metrics
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/argoproj/argo-workflows/edit/master/docs/metrics.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


<h1 id="prometheus-metrics">Prometheus Metrics<a class="headerlink" href="#prometheus-metrics" title="Permanent link">&para;</a></h1>
<p><img alt="GA" src="../assets/ga.svg" /></p>
<blockquote>
<p>v2.7 and after</p>
</blockquote>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>Argo emits a certain number of controller metrics that inform on the state of the controller at any given time. Furthermore,
users can also define their own custom metrics to inform on the state of their Workflows.</p>
<p>Custom prometheus metrics can be defined to be emitted on a <code>Workflow</code>- and <code>Template</code>-level basis. These can be useful
for many cases; some examples:</p>
<ul>
<li>Keeping track of the duration of a <code>Workflow</code> or <code>Template</code> over time, and setting an alert if it goes beyond a threshold</li>
<li>Keeping track of the number of times a <code>Workflow</code> or <code>Template</code> fails over time</li>
<li>Reporting an important internal metric, such as a model training score or an internal error rate</li>
</ul>
<p>Emitting custom metrics with Argo is easy, but it's important to understand what makes a good Prometheus metric and the
best way to define metrics in Argo to avoid problems such as <a href="https://stackoverflow.com/questions/46373442/how-dangerous-are-high-cardinality-labels-in-prometheus">cardinality explosion</a>.</p>
<h2 id="metrics-and-metrics-in-argo">Metrics and metrics in Argo<a class="headerlink" href="#metrics-and-metrics-in-argo" title="Permanent link">&para;</a></h2>
<p>There are two kinds of metrics emitted by Argo: <strong>controller metrics</strong> and <strong>custom metrics</strong>.</p>
<h4 id="controller-metrics">Controller metrics<a class="headerlink" href="#controller-metrics" title="Permanent link">&para;</a></h4>
<p>Metrics that inform on the state of the controller; i.e., they answer the question "What is the state of the controller right now?"
Default controller metrics can be scraped from service <code>workflow-controller-metrics</code> at the endpoint <code>&lt;host&gt;:9090/metrics</code></p>
<h4 id="custom-metrics">Custom metrics<a class="headerlink" href="#custom-metrics" title="Permanent link">&para;</a></h4>
<p>Metrics that inform on the state of a Workflow, or a series of Workflows. These custom metrics are defined by the user in the Workflow spec.</p>
<p>Emitting custom metrics is the responsibility of the emitter owner. Since the user defines Workflows in Argo, the user is responsible
for emitting metrics correctly.</p>
<h3 id="what-is-and-isnt-a-prometheus-metric">What is and isn't a Prometheus metric<a class="headerlink" href="#what-is-and-isnt-a-prometheus-metric" title="Permanent link">&para;</a></h3>
<p>Prometheus metrics should be thought of as ephemeral data points of running processes; i.e., they are the answer to
the question "What is the state of my system <em>right now</em>?". Metrics should report things such as:</p>
<ul>
<li>a counter of the number of times a workflow or steps has failed, or</li>
<li>a gauge of workflow duration, or</li>
<li>an average of an internal metric such as a model training score or error rate.</li>
</ul>
<p>Metrics are then routinely scraped and stored and -- when they are correctly designed -- they can represent time series.
Aggregating the examples above over time could answer useful questions such as:</p>
<ul>
<li>How has the error rate of this workflow or step changed over time?</li>
<li>How has the duration of this workflow changed over time? Is the current workflow running for too long?</li>
<li>Is our model improving over time?</li>
</ul>
<p>Prometheus metrics should <strong>not</strong> be thought of as a store of data. Since metrics should only report the state of the system
at the current time, they should not be used to report historical data such as:</p>
<ul>
<li>the status of an individual instance of a workflow, or</li>
<li>how long a particular instance of a step took to run.</li>
</ul>
<p>Metrics are also ephemeral, meaning there is no guarantee that they will be persisted for any amount of time. If you need
a way to view and analyze historical data, consider the <a href="../workflow-archive/">workflow archive</a> or reporting to logs.</p>
<h3 id="default-controller-metrics">Default Controller Metrics<a class="headerlink" href="#default-controller-metrics" title="Permanent link">&para;</a></h3>
<p>Metrics for the Four Golden Signals are:</p>
<ul>
<li>Latency: <code>argo_workflows_queue_latency</code></li>
<li>Traffic: <code>argo_workflows_count</code> and <code>argo_workflows_queue_depth_count</code></li>
<li>Errors: <code>argo_workflows_count</code> and <code>argo_workflows_error_count</code></li>
<li>Saturation: <code>argo_workflows_workers_busy</code> and <code>argo_workflows_workflow_condition</code></li>
</ul>
<!-- titles should be the exact metric name for deep-linking, alphabetical ordered -->

<h4 id="argo_pod_missing">argo_pod_missing<a class="headerlink" href="#argo_pod_missing" title="Permanent link">&para;</a></h4>
<p>Pods were not seen. E.g. by being deleted by Kubernetes. You should only see this under high load.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This metric's name starts with <code>argo_</code> not <code>argo_workflows_</code>.</p>
</div>
<h4 id="argo_workflows_count">argo_workflows_count<a class="headerlink" href="#argo_workflows_count" title="Permanent link">&para;</a></h4>
<p>Number of workflow in each phase. The <code>Running</code> count does not mean that a workflows pods are running, just that the controller has scheduled them. A workflow can be stuck in <code>Running</code> with pending pods for a long time.</p>
<h4 id="argo_workflows_error_count">argo_workflows_error_count<a class="headerlink" href="#argo_workflows_error_count" title="Permanent link">&para;</a></h4>
<p>A count of certain errors incurred by the controller.</p>
<h4 id="argo_workflows_k8s_request_total">argo_workflows_k8s_request_total<a class="headerlink" href="#argo_workflows_k8s_request_total" title="Permanent link">&para;</a></h4>
<p>Number of API requests sent to the Kubernetes API.</p>
<h4 id="argo_workflows_operation_duration_seconds">argo_workflows_operation_duration_seconds<a class="headerlink" href="#argo_workflows_operation_duration_seconds" title="Permanent link">&para;</a></h4>
<p>A histogram of durations of operations.</p>
<h4 id="argo_workflows_pods_count">argo_workflows_pods_count<a class="headerlink" href="#argo_workflows_pods_count" title="Permanent link">&para;</a></h4>
<p>It is possible for a workflow to start, but no pods be running (e.g. cluster is too busy to run them). This metric sheds light on actual work being done. </p>
<h4 id="argo_workflows_queue_adds_count">argo_workflows_queue_adds_count<a class="headerlink" href="#argo_workflows_queue_adds_count" title="Permanent link">&para;</a></h4>
<p>The number of additions to the queue of workflows or cron workflows.</p>
<h4 id="argo_workflows_queue_depth_count">argo_workflows_queue_depth_count<a class="headerlink" href="#argo_workflows_queue_depth_count" title="Permanent link">&para;</a></h4>
<p>The depth of the queue of workflows or cron workflows to be processed by the controller.</p>
<h4 id="argo_workflows_queue_latency">argo_workflows_queue_latency<a class="headerlink" href="#argo_workflows_queue_latency" title="Permanent link">&para;</a></h4>
<p>The time workflows or cron workflows spend in the queue waiting to be processed.</p>
<h4 id="argo_workflows_workers_busy">argo_workflows_workers_busy<a class="headerlink" href="#argo_workflows_workers_busy" title="Permanent link">&para;</a></h4>
<p>The number of workers that are busy.</p>
<h4 id="argo_workflows_workflow_condition">argo_workflows_workflow_condition<a class="headerlink" href="#argo_workflows_workflow_condition" title="Permanent link">&para;</a></h4>
<p>The number of workflow with different conditions. This will tell you the number of workflows with running pods.</p>
<h4 id="argo_workflows_workflows_processed_count">argo_workflows_workflows_processed_count<a class="headerlink" href="#argo_workflows_workflows_processed_count" title="Permanent link">&para;</a></h4>
<p>A count of all Workflow updates processed by the controller.</p>
<h3 id="metric-types">Metric types<a class="headerlink" href="#metric-types" title="Permanent link">&para;</a></h3>
<p>Please see the <a href="https://prometheus.io/docs/concepts/metric_types/">Prometheus docs on metric types</a>.</p>
<h3 id="how-metrics-work-in-argo">How metrics work in Argo<a class="headerlink" href="#how-metrics-work-in-argo" title="Permanent link">&para;</a></h3>
<p>In order to analyze the behavior of a workflow over time, we need to be able to link different instances
(i.e. individual executions) of a workflow together into a "series" for the purposes of emitting metrics. We do so by linking them together
with the same metric descriptor.</p>
<p>In prometheus, a metric descriptor is defined as a metric's name and its key-value labels. For example, for a metric 
tracking the duration of model execution over time, a metric descriptor could be:</p>
<p><code>argo_workflows_model_exec_time{model_name="model_a",phase="validation"}</code></p>
<p>This metric then represents the amount of time that "Model A" took to train in the phase "Validation". It is important
to understand that the metric name <em>and</em> its labels form the descriptor: <code>argo_workflows_model_exec_time{model_name="model_b",phase="validation"}</code>
is a different metric (and will track a different "series" altogether).</p>
<p>Now, whenever we run our first workflow that validates "Model A" a metric with the amount of time it took it to do so will
be created and emitted. For each subsequent time that this happens, no new metrics will be emitted and the <em>same</em> metric
will be updated with the new value. Since, in effect, we are interested on the execution time of "validation" of "Model A"
over time, we are no longer interested in the previous metric and can assume it has already been scraped.</p>
<p>In summary, whenever you want to track a particular metric over time, you should use the same metric name <em>and</em> metric
labels wherever it is emitted. This is how these metrics are "linked" as belonging to the same series.</p>
<h3 id="grafana-dashboard-for-argo-controller-metrics">Grafana Dashboard for Argo Controller Metrics<a class="headerlink" href="#grafana-dashboard-for-argo-controller-metrics" title="Permanent link">&para;</a></h3>
<p>Please see the <a href="https://grafana.com/grafana/dashboards/13927">Argo Workflows metrics</a> Grafana dashboard.</p>
<h2 id="defining-metrics">Defining metrics<a class="headerlink" href="#defining-metrics" title="Permanent link">&para;</a></h2>
<p>Metrics are defined in-place on the Workflow/Step/Task where they are emitted from. Metrics are always processed <em>after</em>
the Workflow/Step/Task completes, with the exception of <a href="#realtime-metrics">realtime metrics</a>.</p>
<p>Metric definitions <strong>must</strong> include a <code>name</code> and a <code>help</code> doc string. They can also include any number of <code>labels</code> (when
defining labels avoid cardinality explosion). Metrics with the same <code>name</code> <strong>must always</strong> use the same exact <code>help</code> string,
having different metrics with the same name, but with a different <code>help</code> string will cause an error (this is a Prometheus requirement).</p>
<p>All metrics can also be conditionally emitted by defining a <code>when</code> clause. This <code>when</code> clause works the same as elsewhere
in a workflow.</p>
<p>A metric must also have a type, it can be one of <code>gauge</code>, <code>histogram</code>, and <code>counter</code> (<a href="#metric-spec">see below</a>). Within
the metric type a <code>value</code> must be specified. This value can be either a literal value of be an <a href="../variables/">Argo variable</a>.</p>
<p>When defining a <code>histogram</code>, <code>buckets</code> must also be provided (see below).</p>
<p><a href="../variables/">Argo variables</a> can be included anywhere in the metric spec, such as in <code>labels</code>, <code>name</code>, <code>help</code>, <code>when</code>, etc.</p>
<p>Metric names can only contain alphanumeric characters, <code>_</code>, and <code>:</code>.</p>
<h3 id="metric-spec">Metric Spec<a class="headerlink" href="#metric-spec" title="Permanent link">&para;</a></h3>
<p>In Argo you can define a metric on the <code>Workflow</code> level or on the <code>Template</code> level. Here is an example of a <code>Workflow</code>
level Gauge metric that will report the Workflow duration time:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io/v1alpha1</span><span class="w"></span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span><span class="w"></span>
<span class="nt">metadata</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">generateName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">model-training-</span><span class="w"></span>
<span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">entrypoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">steps</span><span class="w"></span>
<span class="w">  </span><span class="nt">metrics</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">prometheus</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">exec_duration_gauge</span><span class="w">         </span><span class="c1"># Metric name (will be prepended with &quot;argo_workflows_&quot;)</span><span class="w"></span>
<span class="w">        </span><span class="nt">labels</span><span class="p">:</span><span class="w">                           </span><span class="c1"># Labels are optional. Avoid cardinality explosion.</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="w"></span>
<span class="w">            </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">model_a</span><span class="w"></span>
<span class="w">        </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Duration</span><span class="nv"> </span><span class="s">gauge</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">name&quot;</span><span class="w">    </span><span class="c1"># A help doc describing your metric. This is required.</span><span class="w"></span>
<span class="w">        </span><span class="nt">gauge</span><span class="p">:</span><span class="w">                            </span><span class="c1"># The metric type. Available are &quot;gauge&quot;, &quot;histogram&quot;, and &quot;counter&quot;.</span><span class="w"></span>
<span class="w">          </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{workflow.duration}}&quot;</span><span class="w">  </span><span class="c1"># The value of your metric. It could be an Argo variable (see variables doc) or a literal value</span><span class="w"></span>

<span class="nn">...</span><span class="w"></span>
</code></pre></div>
<p>An example of a <code>Template</code>-level Counter metric that will increase a counter every time the step fails:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span><span class="w"></span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flakey</span><span class="w"></span>
<span class="w">      </span><span class="nt">metrics</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">prometheus</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result_counter</span><span class="w"></span>
<span class="w">            </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Count</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">step</span><span class="nv"> </span><span class="s">execution</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">result</span><span class="nv"> </span><span class="s">status&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="w"></span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flakey</span><span class="w"></span>
<span class="w">            </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{status}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">Failed&quot;</span><span class="w">       </span><span class="c1"># Emit the metric conditionally. Works the same as normal &quot;when&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">counter</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w">                            </span><span class="c1"># This increments the counter by 1</span><span class="w"></span>
<span class="w">      </span><span class="nt">container</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:alpine3.6</span><span class="w"></span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-c</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">        </span><span class="c1"># fail with a 66% probability</span><span class="w"></span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;import</span><span class="nv"> </span><span class="s">random;</span><span class="nv"> </span><span class="s">import</span><span class="nv"> </span><span class="s">sys;</span><span class="nv"> </span><span class="s">exit_code</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">random.choice([0,</span><span class="nv"> </span><span class="s">1,</span><span class="nv"> </span><span class="s">1]);</span><span class="nv"> </span><span class="s">sys.exit(exit_code)&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
</code></pre></div>
<p>A similar example of such a Counter metric that will increase for every step status</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span><span class="w"></span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flakey</span><span class="w"></span>
<span class="w">      </span><span class="nt">metrics</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">prometheus</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">result_counter</span><span class="w"></span>
<span class="w">            </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Count</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">step</span><span class="nv"> </span><span class="s">execution</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">result</span><span class="nv"> </span><span class="s">status&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">labels</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">name</span><span class="w"></span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flakey</span><span class="w"></span>
<span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status</span><span class="w"></span>
<span class="w">                </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{status}}&quot;</span><span class="w">    </span><span class="c1"># Argo variable in `labels`</span><span class="w"></span>
<span class="w">            </span><span class="nt">counter</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">container</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python:alpine3.6</span><span class="w"></span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-c</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">        </span><span class="c1"># fail with a 66% probability</span><span class="w"></span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;import</span><span class="nv"> </span><span class="s">random;</span><span class="nv"> </span><span class="s">import</span><span class="nv"> </span><span class="s">sys;</span><span class="nv"> </span><span class="s">exit_code</span><span class="nv"> </span><span class="s">=</span><span class="nv"> </span><span class="s">random.choice([0,</span><span class="nv"> </span><span class="s">1,</span><span class="nv"> </span><span class="s">1]);</span><span class="nv"> </span><span class="s">sys.exit(exit_code)&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
</code></pre></div>
<p>Finally, an example of a <code>Template</code>-level Histogram metric that tracks an internal value:</p>
<div class="highlight"><pre><span></span><code><span class="nn">...</span><span class="w"></span>
<span class="w">  </span><span class="nt">templates</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">random-int</span><span class="w"></span>
<span class="w">      </span><span class="nt">metrics</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">prometheus</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">random_int_step_histogram</span><span class="w"></span>
<span class="w">            </span><span class="nt">help</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Value</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">int</span><span class="nv"> </span><span class="s">emitted</span><span class="nv"> </span><span class="s">by</span><span class="nv"> </span><span class="s">random-int</span><span class="nv"> </span><span class="s">at</span><span class="nv"> </span><span class="s">step</span><span class="nv"> </span><span class="s">level&quot;</span><span class="w"></span>
<span class="w">            </span><span class="nt">when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{status}}</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">Succeeded&quot;</span><span class="w">    </span><span class="c1"># Only emit metric when step succeeds</span><span class="w"></span>
<span class="w">            </span><span class="nt">histogram</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">buckets</span><span class="p">:</span><span class="w">                              </span><span class="c1"># Bins must be defined for histogram metrics</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.01</span><span class="w">                              </span><span class="c1"># and are part of the metric descriptor.</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.01</span><span class="w">                              </span><span class="c1"># All metrics in this series MUST have the</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6.01</span><span class="w">                              </span><span class="c1"># same buckets.</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8.01</span><span class="w"></span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.01</span><span class="w"></span>
<span class="w">              </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{outputs.parameters.rand-int-value}}&quot;</span><span class="w">         </span><span class="c1"># References itself for its output (see variables doc)</span><span class="w"></span>
<span class="w">      </span><span class="nt">outputs</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rand-int-value</span><span class="w"></span>
<span class="w">            </span><span class="nt">globalName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rand-int-value</span><span class="w"></span>
<span class="w">            </span><span class="nt">valueFrom</span><span class="p">:</span><span class="w"></span>
<span class="w">              </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/rand_int.txt</span><span class="w"></span>
<span class="w">      </span><span class="nt">container</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">alpine:latest</span><span class="w"></span>
<span class="w">        </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">sh</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-c</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;RAND_INT=$((1</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">RANDOM</span><span class="nv"> </span><span class="s">%</span><span class="nv"> </span><span class="s">10));</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">$RAND_INT;</span><span class="nv"> </span><span class="s">echo</span><span class="nv"> </span><span class="s">$RAND_INT</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">/tmp/rand_int.txt&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="nn">...</span><span class="w"></span>
</code></pre></div>
<h3 id="realtime-metrics">Realtime metrics<a class="headerlink" href="#realtime-metrics" title="Permanent link">&para;</a></h3>
<p>Argo supports a limited number of real-time metrics. These metrics are emitted in realtime, beginning when the step execution starts
and ending when it completes. Realtime metrics are only available on Gauge type metrics and with a <a href="../variables/#realtime-metrics">limited number of variables</a>.</p>
<p>To define a realtime metric simply add <code>realtime: true</code> to a gauge metric with a valid realtime variable. For example:</p>
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="nt">gauge</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">realtime</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{duration}}&quot;</span><span class="w"></span>
</code></pre></div>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../workflow-archive/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Workflow Archive" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Workflow Archive
            </div>
          </div>
        </a>
      
      
        
        <a href="../links/" class="md-footer__link md-footer__link--next" aria-label="Next: Links" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Links
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.960e086b.min.js"></script>
      
    
  </body>
</html>