apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: whalesay-
spec:
  entrypoint: whalesay
  templates:
    - name: whalesay
      dag:
        tasks:
          - name: redis
            template: redis-tmpl
          - name: whale
            dependencies: [redis]
            template: whale-tmpl
    - name: redis-tmpl
      daemon: true
      container:
        image: argoproj/argosay:v2
        command: ["sleep"]
        args: ["60"]
    - name: whale-tmpl
      container:
        image: argoproj/argosay:v2

