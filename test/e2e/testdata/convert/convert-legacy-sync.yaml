apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  name: legacy-sync
spec:
  entrypoint: main
  synchronization:
    semaphore:
      configMapKeyRef:
        name: my-config
        key: workflow
    mutex:
      name: test-mutex
  templates:
  - name: main
    container:
      image: alpine:3.23
      command: [echo]
      args: ["hello"]
    synchronization:
      semaphore:
        configMapKeyRef:
          name: template-config
          key: template
      mutex:
        name: template-mutex
