apiVersion: argoproj.io/v1alpha1
kind: Workflow
metadata:
  generateName: steps-with-expression-
  labels:
    argo-e2e: true
spec:
  entrypoint: main
  templates:
    - name: main
      steps:
        - - name: step-0
            template: pod-0
        - - name: step-1
            template: pod-1
            arguments:
              parameters:
                - name: p0
                  value: "{{item}}"
            withExpression: |
              filter(array(steps["step-0"].outputs.result), {# > 1})

    - name: pod-0
      container:
        image: argoproj/argosay:v2
        args: [ echo, "[1, 2]" ]

    - name: pod-1
      inputs:
        parameters:
          - name: p0
      container:
        image: argoproj/argosay:v2
        args: [ echo, "{{inputs.parameters.p0}}" ]