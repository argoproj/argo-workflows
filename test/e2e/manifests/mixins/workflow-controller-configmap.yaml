apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-controller-configmap
data:
  containerRuntimeExecutor: pns
  # The maximum number number of pods not yet labelled as complete.
  # Because there is always a delay between a pod completing, and the controller labelling it as complete,
  # there will often be fewer running pods than the limit.
  resourceLimit: "3"
  # Rate-limit or creation of resources (i.e. pods).
  # In this example, we throttle to 10 per second.
  # When pod creation is throttled by this, the workflow will get re-queued.
  # This means the workflow may not be reconciled for 10s (by default), therefore no more pods may be created.
  resourceRateLimit: |
    limit: 10
    burst: 1
  workflowDefaults: |
    spec:
      activeDeadlineSeconds: 300
      ttlStrategy:
        secondsAfterCompletion: 600
  executor: |
    imagePullPolicy: IfNotPresent
    resources:
      requests:
        cpu: 0.1
        memory: 64Mi
      limits:
        cpu: 0.5
        memory: 128Mi